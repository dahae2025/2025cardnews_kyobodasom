<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>이미지 슬라이드</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #ffffff;
            font-family: Arial, sans-serif;
            padding: 0;
            margin: 0;
        }

        .slider-container {
            position: relative;
            width: 100vw;
            height: 100vw;
            max-width: 600px;
            max-height: 600px;
            background: #fff;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        @media (min-width: 601px) {
            body {
                padding: 20px;
            }
            
            .slider-container {
                border-radius: 8px;
            }
        }

        @media (max-width: 600px) {
            body {
                padding: 0;
            }

            .slider-container {
                width: 100vw;
                height: 100vw;
                max-width: 100vw;
                max-height: 100vw;
                border-radius: 0;
            }
        }

            .arrow {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .arrow.left {
                left: 10px;
            }

            .arrow.right {
                right: 10px;
            }

            .counter {
                bottom: 15px;
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        @media (max-width: 768px) {
            .arrow {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .arrow.left {
                left: 10px;
            }

            .arrow.right {
                right: 10px;
            }
        }

        @media (max-width: 480px) {
            .arrow {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }

            .arrow.left {
                left: 8px;
            }

            .arrow.right {
                right: 8px;
            }
        }

        .slider-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            touch-action: pan-y pinch-zoom;
        }

        .slides-container {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease-in-out;
            will-change: transform;
        }

        .slide {
            min-width: 100%;
            width: 100%;
            height: 100%;
            flex-shrink: 0;
            position: relative;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none;
            user-select: none;
            -webkit-user-select: none;
        }

        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
        }

        .arrow.show {
            opacity: 1;
            pointer-events: auto;
        }

        .arrow:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateY(-50%) scale(1.1);
        }

        .arrow.left {
            left: 20px;
        }

        .arrow.right {
            right: 20px;
        }


    </style>
</head>
<body>
    <div class="slider-container">
        <div class="slider-wrapper" id="sliderWrapper">
            <div class="slides-container" id="slidesContainer">
                <div class="slide">
                    <img src="https://i.imgur.com/sRBYiis.jpeg" alt="Image 1">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/O9hFoMB.jpeg" alt="Image 2">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/C2idMhl.jpeg" alt="Image 3">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/78nAVRH.jpeg" alt="Image 4">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/GU4GDtN.jpeg" alt="Image 5">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/84buDzW.jpeg" alt="Image 6">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/9qf8fSM.jpeg" alt="Image 7">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/gooXbHy.jpeg" alt="Image 8">
                </div>
                <div class="slide">
                    <img src="https://i.imgur.com/8Ecgujr.jpeg" alt="Image 9">
                </div>
            </div>
        </div>

        <button class="arrow left" id="prevBtn">‹</button>
        <button class="arrow right" id="nextBtn">›</button>
    </div>

    <script>
        let currentSlide = 0;
        let showControls = true;
        let hideTimeout;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const sliderWrapper = document.getElementById('sliderWrapper');
        const slidesContainer = document.getElementById('slidesContainer');

        function updateSlide() {
            slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
            updateButtons();
        }

        function updateButtons() {
            // 첫 번째 슬라이드에서는 이전 버튼 숨김
            if (currentSlide === 0) {
                prevBtn.classList.remove('show');
            } else {
                if (showControls) {
                    prevBtn.classList.add('show');
                }
            }

            // 마지막 슬라이드에서는 다음 버튼 숨김
            if (currentSlide === totalSlides - 1) {
                nextBtn.classList.remove('show');
            } else {
                if (showControls) {
                    nextBtn.classList.add('show');
                }
            }
        }

        function showButtons() {
            showControls = true;
            updateButtons();
            resetHideTimer();
        }

        function hideButtons() {
            showControls = false;
            prevBtn.classList.remove('show');
            nextBtn.classList.remove('show');
        }

        function resetHideTimer() {
            clearTimeout(hideTimeout);
            hideTimeout = setTimeout(() => {
                hideButtons();
            }, 1000); // 1초 후 자동 숨김
        }

        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            e.preventDefault();
            if (currentSlide > 0) {
                currentSlide--;
                updateSlide();
                showButtons();
            }
        });

        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            e.preventDefault();
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlide();
                showButtons();
            }
        });

        prevBtn.addEventListener('touchend', (e) => {
            e.stopPropagation();
            e.preventDefault();
            if (currentSlide > 0) {
                currentSlide--;
                updateSlide();
                showButtons();
            }
        });

        nextBtn.addEventListener('touchend', (e) => {
            e.stopPropagation();
            e.preventDefault();
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlide();
                showButtons();
            }
        });

        // 마우스 움직임 감지
        sliderWrapper.addEventListener('mousemove', () => {
            showButtons();
        });

        // 터치 감지
        sliderWrapper.addEventListener('touchstart', () => {
            showButtons();
        }, { passive: true });

        sliderWrapper.addEventListener('click', (e) => {
            // 화살표 버튼이 아닌 경우에만 타이머 리셋
            if (e.target === sliderWrapper || e.target.closest('.slide')) {
                showButtons();
            }
        });

        // 드래그/스와이프 기능
        let startX = 0;
        let currentX = 0;
        let isDragging = false;
        let startTransform = 0;

        sliderWrapper.addEventListener('mousedown', handleDragStart);
        sliderWrapper.addEventListener('touchstart', handleDragStart, { passive: true });
        
        sliderWrapper.addEventListener('mousemove', handleDragMove);
        sliderWrapper.addEventListener('touchmove', handleDragMove, { passive: false });
        
        sliderWrapper.addEventListener('mouseup', handleDragEnd);
        sliderWrapper.addEventListener('touchend', handleDragEnd);
        sliderWrapper.addEventListener('mouseleave', handleDragEnd);

        function handleDragStart(e) {
            isDragging = true;
            startX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
            startTransform = currentSlide * 100;
            slidesContainer.style.transition = 'none';
        }

        function handleDragMove(e) {
            if (!isDragging) return;
            
            e.preventDefault();
            currentX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
            const diff = currentX - startX;
            const percentMove = (diff / sliderWrapper.offsetWidth) * 100;
            
            slidesContainer.style.transform = `translateX(-${startTransform - percentMove}%)`;
        }

        function handleDragEnd(e) {
            if (!isDragging) return;
            
            isDragging = false;
            slidesContainer.style.transition = 'transform 0.5s ease-in-out';
            
            const diff = currentX - startX;
            const threshold = sliderWrapper.offsetWidth * 0.2; // 20% 이동 시 슬라이드 변경
            
            if (Math.abs(diff) > threshold) {
                if (diff > 0 && currentSlide > 0) {
                    // 오른쪽으로 드래그 (이전 슬라이드)
                    currentSlide--;
                } else if (diff < 0 && currentSlide < totalSlides - 1) {
                    // 왼쪽으로 드래그 (다음 슬라이드)
                    currentSlide++;
                }
            }
            
            updateSlide();
            startX = 0;
            currentX = 0;
        }

        // 키보드 화살표 키 지원
        document.addEventListener('keydown', (e) => {
            if (!showControls) return;
            
            if (e.key === 'ArrowLeft' && currentSlide > 0) {
                currentSlide--;
                updateSlide();
            } else if (e.key === 'ArrowRight' && currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlide();
            }
        });

        // 초기 상태 설정
        updateSlide();
        resetHideTimer(); // 3초 후 화살표 자동 숨김 시작
    </script>
</body>
</html>
